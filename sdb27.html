<html>
<head>
  <title>Test Voice</title>
</head>
<body>

<script type='text/javascript'>
    function initAgentforceMessaging() {
        try {
            agentforce_messaging.init({
                "siteUrl": "https://orgfarm-2591b86d7b.test1.my.pc-rnd.site.com/AFMVoiceAgent1756898806102",
                "agentApiConfiguration": {
                        "agentId": "0XxLT00000081dF0AQ", 
                        "domainUrl":"https://orgfarm-2591b86d7b.test1.my.pc-rnd.salesforce.com",
                        "authTokenEndpoint": "https://orgfarm-2591b86d7b.test1.my.pc-rnd.site.com/AFMVoiceAgent1756898806102/agentforce/bootstrap?agentid=0XxLT00000081dF0AQ",
                        "voiceEndpoint": "https://test.api.salesforce.com/einstein/ai-agent/v1.1/realtime/sessions/{SESSION_ID}/join",
                         "endpoint": "https://test.api.salesforce.com/einstein/ai-agent/v1/agents/{AGENT_ID}/sessions",
                },
                "uiConfiguration": {}
            });
        } catch (err) {
            console.error('Error loading Agentforce Messaging: ', err);
        }
    };
</script>

<script type='text/javascript'>
    function loadInitScript() {
        let script = document.createElement("script");
        script.id = "init-agentforce-messaging";
        script.src = "https://test-service.force.com/embeddedservice/agentforcemessaging/0.3/init.js";
        script.type = "text/javascript";

        script.onerror = () => {
            console.error("Failed to load init.js");
        };
        script.onload = () => {
            initAgentforceMessaging();
        };

        document.body.appendChild(script);
    };

    document.addEventListener("DOMContentLoaded", (event) => {
        // optionally add a check for document.body       
        loadInitScript();
    });
</script>

</body>
</html>